# Sharp edges for docs-refresh
#
# NOTE: The `detect` field is informational only - it shows how to manually
# check for the edge case. These are NOT automatically enforced.

edges:
  - id: claude-md-skills-table-stale
    description: "Added or removed a skill but didn't update CLAUDE.md skills listing"
    detect: "Compare skill count in .claude/skills/ vs CLAUDE.md entries"
    impact: "Claude won't know about new skills or will reference deleted ones"
    fix: |
      Update the skills listing in CLAUDE.md:
      1. Add entry for new skill with description
      2. Remove entry for deleted skill
      3. Commit CLAUDE.md with the skill changes
    severity: high

  - id: claude-md-missing
    description: "CLAUDE.md file doesn't exist"
    detect: "test ! -f CLAUDE.md"
    impact: "Claude has no project-level instructions or skill awareness"
    fix: "Create CLAUDE.md with project description and skills listing"
    severity: critical

  - id: structure-section-stale
    description: "Repository Structure section in CLAUDE.md lists wrong files"
    detect: "Compare listed files in CLAUDE.md with actual directory contents"
    impact: "Misleading project overview. Claude may reference non-existent files."
    fix: |
      1. List actual files: ls .github/workflows/ scripts/
      2. Update the Repository Structure section in CLAUDE.md
    severity: medium

  - id: commands-section-stale
    description: "Commands section in CLAUDE.md doesn't match actual scripts"
    detect: "Compare documented commands with script contents"
    impact: "Claude may suggest commands that don't work or miss new capabilities"
    fix: "Review scripts/*.sh and update Commands section in CLAUDE.md"
    severity: medium
